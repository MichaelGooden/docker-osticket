version: '3.7'

# Run with UID=$(id -u) GID=$(id -g) docker-compose up
services:
  mysql_osticket:
    container_name: mysql_osticket
    user: "${UID}:${GID}"
    restart: unless-stopped
    image: mysql:5.7.35
    env_file: ./env
    volumes:
      -  ${DOCKER_ROOT:-./.root}/var/lib/mysql:/var/lib/mysql
    ports:
      - 3306:3306

#  postfix:
#    image: juanluisbaptiste/postfix:latest
#    expose:
#      - "25"
#    env_file:
#      - env/.envpostfix
#    volumes:
#     - "/etc/localtime:/etc/localtime:ro"
#    networks:
#      - basnet
      
  osticket:
    container_name: sbdi_osticket
    restart: unless-stopped
    build:
      context: .
      dockerfile: Dockerfile
    depends_on:
      - mysql_osticket
    links: 
      - mysql_osticket:mysql
    env_file: ./env
    volumes:
      -  ${DOCKER_ROOT:-./.root}/var/lib/osticket:/var/lib/osticket
    ports:
    - 8080:80

